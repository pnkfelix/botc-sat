<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOTC DSL Browser Test</title>
</head>
<body>
    <h1>BOTC DSL - Unified Test Suite</h1>
    <div id="status">Testing...</div>
    <div id="result"></div>
    
    <!-- Load JSMiniSolvers -->
    <script src="./vendor/minisolvers.js"></script>
    
    <!-- Load browser-compatible solver -->
    <script src="./src/browser-solver.js"></script>
    
    <!-- Load shared test suite -->
    <script src="./src/shared-tests.js"></script>
    
    <script>
        async function runBrowserTests() {
            const statusEl = document.getElementById('status');
            const resultEl = document.getElementById('result');
            
            try {
                statusEl.textContent = 'Running unified test suite...';
                console.log("=== BOTC DSL Browser Tests ===");
                
                // Run the same tests as Node.js using our browser-compatible solver
                const results = await runSharedSATSolverTests(BrowserSATSolver);
                
                statusEl.textContent = 'SUCCESS: Unified test suite completed!';
                resultEl.innerHTML = `
                    <h3>Test 1: Simple Constraints</h3>
                    <strong>Input:</strong> ['x=true', 'y=false']<br>
                    <strong>Satisfiable:</strong> ${results.test1.satisfiable}<br>
                    <strong>Model:</strong> ${JSON.stringify(results.test1.model)}<br>
                    
                    <h3>Test 2: Complex Formula</h3>
                    <strong>Formula:</strong> (x1 ∨ x2) ∧ (¬x1) ∧ (¬x3)<br>
                    <strong>Input:</strong> ['x1=false', 'x2=true', 'x3=false']<br>
                    <strong>Satisfiable:</strong> ${results.test2.satisfiable}<br>
                    <strong>Model:</strong> ${JSON.stringify(results.test2.model)}<br>
                    <strong>Interpretation:</strong> x1=${results.test2.model?.x1 ? "true" : "false"}, x2=${results.test2.model?.x2 ? "true" : "false"}, x3=${results.test2.model?.x3 ? "true" : "false"}<br>
                    
                    <br><em>✅ Same code running in browser and Node.js - true unified testing!</em>
                `;
                
            } catch (error) {
                statusEl.textContent = 'Error running tests:';
                resultEl.textContent = error.message;
                console.error('Test suite failed:', error);
            }
        }
        
        runBrowserTests();
    </script>
</body>
</html>